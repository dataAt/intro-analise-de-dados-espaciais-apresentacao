<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Introdu√ß√£o √† analise de dados espaciais</title>
    <meta charset="utf-8" />
    <meta name="author" content=" Adriano Almeida Felipe Carvalho Felipe Menino Helv√©cio Neto" />
    <link rel="stylesheet" href="assets/shinobi.css" type="text/css" />
    <link rel="stylesheet" href="assets/ninpo.css" type="text/css" />
    <link rel="stylesheet" href="assets/ninjutsu.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introdu√ß√£o √† analise de dados espaciais
## <br> <a href="https://dataat.github.io/introducao-analise-de-dados-espaciais/introducao.html">Material de apoio</a>
### <br>Adriano Almeida<br>Felipe Carvalho<br>Felipe Menino<br>Helv√©cio Neto
### <br>23 de outubro de 2019

---

exclude: true
&lt;style type="text/css"&gt;
code.r{
  font-size: 16px;
}
pre {
  font-size: 16px !important;
}
&lt;/style&gt;


---
class: bg-main1

# Agenda

--
### Revis√£o da linguagem R üî∂ 

--
### Kit de ferramentas Tidyverse üîß

--
### Pacote SF (*Simple Features*)  üíπ

---
class: middle bg-main1

# Revis√£o da linguagem R

---

class: bg-main1

# Hist√≥ria do R 

&lt;br&gt;

### **R** √© uma linguagem de programa√ß√£o de alto n√≠vel com ambiente voltado para visualiza√ß√£o e an√°lise de dados. Em ess√™ncia foi inspirada na linguagem de programa√ß√£o **S**. Foi iniciamente escrito por **R**oss Ihaka and **R**obert Gentleman no departamento de estat√≠stica da universidade de Auckland na Nova Zel√¢ndia. 

 &lt;div class="row"&gt;
  &lt;div class="column"&gt;
    &lt;figure&gt;
    &lt;img src="./slide_img/robert_gentleman.jpg" alt="Snow" style="float: left;width: 30%; height: 30%;padding: 3px;top:-10px;"&gt;
     &lt;/figure&gt;
  &lt;/div&gt;
  &lt;div class="column"&gt;
    &lt;img src="./slide_img/ross_lhaka.jpeg" alt="Mountains" style="float: right;width: 25%; height: 25%; padding: 3px;top:-10px; margin-right: 200px;"&gt;
  &lt;/div&gt;
&lt;/div&gt;

---

class: bg-main1

# Produ√ß√£o de ci√™ncia com R
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="slide_img/r_articles.png" alt="S√©rie temporal de cita√ß√µes dos pacotes feitos em R" width="45%" /&gt;
&lt;p class="caption"&gt;S√©rie temporal de cita√ß√µes dos pacotes feitos em R&lt;/p&gt;
&lt;/div&gt;

---

class: middle bg-main1

# Comandos b√°sicos

---

class: bg-main1

# Comandos b√°sicos

### Atribuimos valor usando `&lt;-` apontada para a vari√°vel

&lt;br&gt;&lt;br&gt;


```r
inteiro &lt;- 321L

numerico &lt;- 123

complexo &lt;- 321i

booleano &lt;- TRUE ## ou FALSE

caractere &lt;- "Bem-vindos"
```

&lt;br&gt;

### Acessando os valores:


```r
print(numerico)
```

```
## [1] 123
```

```r
caractere
```

```
## [1] "Bem-vindos"
```

---
class: bg-main1


# Tipos de dados estruturados

&lt;br&gt;

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="slide_img/imagens_curso_1.png" alt="Estrutura de dados: Vetor e Matriz" width="60%" /&gt;
&lt;p class="caption"&gt;Estrutura de dados: Vetor e Matriz&lt;/p&gt;
&lt;/div&gt;

---

class: bg-main1


# Tipos de dados estruturados
&lt;br&gt;&lt;br&gt;

### Podemos declarar um vetor usando `c()` e uma lista usando `list()` 

&lt;br&gt;


```r
vetor &lt;- c(1, 3, 5)

lista &lt;- list(1, 2.3, c("tres", FALSE))
```


```r
vetor
```

```
## [1] 1 3 5
```

--


```r
lista
```

```
## [[1]]
## [1] 1
## 
## [[2]]
## [1] 2.3
## 
## [[3]]
## [1] "tres"  "FALSE"
```

---
class:bg-main1 

# Qual √© a diferen√ßa?

&lt;br&gt;&lt;br&gt;

## Vetores s√£o at√¥micos, ou seja, s√≥ aceitam um tipo:
&lt;br&gt;
--


```r
vetor_diferente &lt;- c(1, 2.5, TRUE, "ola")
vetor_diferente
```

```
## [1] "1"    "2.5"  "TRUE" "ola"
```

--
## Listas n√£o s√£o at√¥micas, ou seja, aceitam diversos tipos:
--


```r
lista_diferente &lt;- list(1, TRUE, "ola")
lista_diferente
```

```
## [[1]]
## [1] 1
## 
## [[2]]
## [1] TRUE
## 
## [[3]]
## [1] "ola"
```

---
class: bg-main1
# Dataframe
&lt;br&gt;
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="slide_img/imagens_curso_2.png" alt=" Representa√ß√£o de um Data frame" width="80%" /&gt;
&lt;p class="caption"&gt; Representa√ß√£o de um Data frame&lt;/p&gt;
&lt;/div&gt;

---
class: bg-main1
# Dataframe

&lt;br&gt;
## Tipo especial de lista, onde cada coluna √© um **vetor** e todas as colunas t√™m o mesmo n√∫mero de observa√ß√µes. √â o tipo mais utilizado para se trabalhar com dados. - [Limpeza de dados em R](https://cdr.ibpad.com.br/introducao.html#o-que-e-r-e-por-que-devo-aprende-lo)

&lt;br&gt;

## Podemos criar um dataframe usando `tibble()`


```r
  meu_df &lt;- tibble::tibble(
    nome=c("Ana", "Joana", "Joao"), 
    idade=c(23, 24, 12),
    cargo=c("Cientista", "Analista", "Estudante")
    )
  
  meu_df
```

```
## # A tibble: 3 x 3
##   nome  idade cargo    
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;    
## 1 Ana      23 Cientista
## 2 Joana    24 Analista 
## 3 Joao     12 Estudante
```

---
class: bg-main1

# Dataframe
&lt;br&gt;

## Acessando os atributos: 
&lt;br&gt;


```r
  meu_df$nome
```

```
## [1] "Ana"   "Joana" "Joao"
```
&lt;br&gt;
--

## Verificando o nome de todos os atributos
&lt;br&gt;

```r
  colnames(meu_df)
```

```
## [1] "nome"  "idade" "cargo"
```

---
class: bg-main1

# Estruta de decis√£o

&lt;br&gt; 

## O `if` do **R** √© bem parecido com o do **Java**

&lt;br&gt;

```r
  valor_a &lt;- 21
  valor_b &lt;- 42
  
  if(valor_a &lt; valor_b){ 
    print("Valor A menor do que o valor B")
  } else if(valor_a == valor_b){
    print("Valor A √© igual ao valor B")
  } else {
    print("Valor A √© maior do que o valor B")
  }
```

```
## [1] "Valor A menor do que o valor B"
```

--
## Dica de ouro


```r
  ifelse(42 &gt; TRUE, "Verdade universal",
         "tudo mentira")
```

```
## [1] "Verdade universal"
```

---
class: bg-main1
# Estruta de repeti√ß√£o

&lt;br&gt;

## Por outro lado, o `for` do **R** parece com a sintaxe do **Python**

&lt;br&gt;


```r
  meu_vetor &lt;- c(1, 2, 3)
  for(i in meu_vetor){
    print(i)
  }
```

```
## [1] 1
## [1] 2
## [1] 3
```
---
class: middle bg-main1

#  Kit de ferramentas `Tidyverse` üîß

---

class: bg-main1
# Tidyverse
&lt;br&gt;
### Conjunto de pacotes em **R** para ci√™ncia de dados.


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="slide_img/ds_process_2.png" alt="Conjunto de pacotes do kit de ferramentas e etapas de um projeto de ci√™ncia de dados" width="100%" /&gt;
&lt;p class="caption"&gt;Conjunto de pacotes do kit de ferramentas e etapas de um projeto de ci√™ncia de dados&lt;/p&gt;
&lt;/div&gt;

---

class: bg-main1
# Leitura e escrita de dados - `readr`

## Primeiro vamos ler um conjunto de dados


```r
  library(readr)
  # Leitura
  star_wars &lt;- readr::read_csv(file = "data/starwars.csv")
```

```
## Parsed with column specification:
## cols(
##   name = col_character(),
##   height = col_double(),
##   mass = col_double(),
##   hair_color = col_character(),
##   skin_color = col_character(),
##   eye_color = col_character(),
##   birth_year = col_double(),
##   gender = col_character(),
##   homeworld = col_character(),
##   species = col_character()
## )
```

```r
  head(star_wars, 3)
```

```
## # A tibble: 3 x 10
##   name  height  mass hair_color skin_color eye_color birth_year gender
##   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
## 1 Luke‚Ä¶    172    77 blond      fair       blue              19 male  
## 2 C-3PO    167    75 &lt;NA&gt;       gold       yellow           112 &lt;NA&gt;  
## 3 R2-D2     96    32 &lt;NA&gt;       white, bl‚Ä¶ red               33 &lt;NA&gt;  
## # ‚Ä¶ with 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;
```
---

class: bg-main1
# Para escrever
&lt;br&gt;

```r
  # escrita dos dados em .json
  jsonlite::write_json(star_wars, "data/starwars.json")
```
&lt;br&gt;


```r
    # escrita dos dados em .csv
  readr::write_csv(star_wars, "data/starwars.csv")
```

---
class: bg-main1
# Manipula√ß√£o de dados - `dplyr`
&lt;br&gt;
### Para manipular nosso dataframe, vamos usar o pacote `dplyr`. M√©todos b√°sicos:



&lt;img src="slide_img/dplyr_verbs.jpg" width="70%" style="display: block; margin: auto;" /&gt;

---
class: bg-main1

# Sele√ß√£o e Filtro
&lt;br&gt;
## Para facilitar a sele√ß√£o dos atributos e tirar `$`, vamos usar o `select()`:


```r
  # Importa√ß√£o do pacote dplyr
  suppressMessages(library(dplyr))

  # Sele√ß√£o dos atribuos
  selecao &lt;- dplyr::select(star_wars, name, hair_color)
  
  head(selecao, 3)
```

```
## # A tibble: 3 x 2
##   name           hair_color
##   &lt;chr&gt;          &lt;chr&gt;     
## 1 Luke Skywalker blond     
## 2 C-3PO          &lt;NA&gt;      
## 3 R2-D2          &lt;NA&gt;
```

---

class: bg-main1
#  `filter()`

&lt;br&gt;


```r
  # Filtragem pelo atributos species e skin_color
  filtro &lt;- dplyr::filter(star_wars, species == "Droid" &amp;
                                  skin_color == "gold")
  filtro
```

```
## # A tibble: 1 x 10
##   name  height  mass hair_color skin_color eye_color birth_year gender
##   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
## 1 C-3PO    167    75 &lt;NA&gt;       gold       yellow           112 &lt;NA&gt;  
## # ‚Ä¶ with 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;
```
---
class: bg-main1

# Agrupamento e agrega√ß√£o - `group_by()` e `summarise()`
&lt;br&gt;
## Para criar grupos usamos a fun√ß√£o `group_by()`


```r
  agrupamento &lt;- dplyr::group_by(star_wars, species)
  
  head(agrupamento, 3)
```

```
## # A tibble: 3 x 10
## # Groups:   species [2]
##   name  height  mass hair_color skin_color eye_color birth_year gender
##   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
## 1 Luke‚Ä¶    172    77 blond      fair       blue              19 male  
## 2 C-3PO    167    75 &lt;NA&gt;       gold       yellow           112 &lt;NA&gt;  
## 3 R2-D2     96    32 &lt;NA&gt;       white, bl‚Ä¶ red               33 &lt;NA&gt;  
## # ‚Ä¶ with 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;
```

---
class: bg-main1

# Agrega√ß√£o - `summarise()`:

```r
   media_grupo &lt;- dplyr::summarise(agrupamento, 
                                   media = mean(height, na.rm = TRUE))
   
  head(media_grupo, 3)
```

```
## # A tibble: 3 x 2
##   species  media
##   &lt;chr&gt;    &lt;dbl&gt;
## 1 &lt;NA&gt;       160
## 2 Aleena      79
## 3 Besalisk   198
```

---
class: bg-main1

# Transforma√ß√£o de atributos  - `mutate()`
&lt;br&gt;
## Para criar/transformar novos atributos, usa-se `mutate()`:


```r
  # convers√£o de cm para metros
  star_wars &lt;- dplyr::mutate(star_wars, height = height/100)
  
  head(star_wars, 3)
```

```
## # A tibble: 3 x 10
##   name  height  mass hair_color skin_color eye_color birth_year gender
##   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
## 1 Luke‚Ä¶   1.72    77 blond      fair       blue              19 male  
## 2 C-3PO   1.67    75 &lt;NA&gt;       gold       yellow           112 &lt;NA&gt;  
## 3 R2-D2   0.96    32 &lt;NA&gt;       white, bl‚Ä¶ red               33 &lt;NA&gt;  
## # ‚Ä¶ with 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;
```

---
class: bg-main1
## Facilitando a vida com o operador `pipe`(`%&gt;%`)
--

&lt;br&gt;
## O **pipe** passa a resposta da primeira atribui√ß√£o para o primeiro par√¢metro da fun√ß√£o seguinte:


```r
  media_grupo &lt;- star_wars %&gt;% dplyr::group_by(species) %&gt;%
  dplyr::summarise(media = mean(height, na.rm = TRUE)) %&gt;%
  dplyr::arrange(desc(media))

  head(media_grupo, 3)
```

```
## # A tibble: 3 x 2
##   species  media
##   &lt;chr&gt;    &lt;dbl&gt;
## 1 Quermian  2.64
## 2 Wookiee   2.31
## 3 Kaminoan  2.21
```

---

class: middle bg-main1

# Manipula√ß√£o de dados espaciais üó∫


---

class: bg-main1

# Pacote `Simple Features - SF` 
&lt;br&gt;
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="slide_img/sf_package.jpg" alt="Conjunto de pacotes do kit de ferramentas e etapas de um projeto de ci√™ncia de dados" width="50%" /&gt;
&lt;p class="caption"&gt;Conjunto de pacotes do kit de ferramentas e etapas de um projeto de ci√™ncia de dados&lt;/p&gt;
&lt;/div&gt;
---

class: bg-main1
&lt;br&gt;
# Pacote `Simple Features - SF`
&lt;br&gt;
## Um breve resumo das classes do pacote **SF**:

--

### `sfg` √önico objeto geom√©trico, por exemplo, `POINT`.

--
### `sfc` Jun√ß√£o de tipos geom√©tricos da classe `sfg`. Possui informa√ß√µes como proje√ß√£o e sistema de refer√™ncia geogr√°fica.

--
### `sf` Jun√ß√£o das classes `sfg` e `sfc`. Cont√©m atributos correspondes ao tipo geom√©trico, bem como atributos discretos, categ√≥ricos que representam caracter√≠sticas do objeto.

---

class: bg-main1

# Leitura de dados espaciais


```r
  # Leitura do arquivo .shp que possui as unidades federativas  
  shp_brazil &lt;- sf::read_sf("data/1_estados_do_brasil_shape/Brasil.shp")  
  
  # Visualiza√ß√£o das observa√ß√µes
  head(shp_brazil, 4)
```

```
## Simple feature collection with 4 features and 4 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.99094 ymin: -11.14449 xmax: -35.15167 ymax: 4.437122
## epsg (SRID):    NA
## proj4string:    +proj=longlat +ellps=aust_SA +no_defs
## # A tibble: 4 x 5
##   ESTADOS   REGIAO COD_UF UF                                       geometry
##   &lt;chr&gt;     &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                          &lt;MULTIPOLYGON [¬∞]&gt;
## 1 Acre      Norte      12 AC    (((-73.80098 -7.111453, -73.74084 -7.14318‚Ä¶
## 2 Alagoas   Norde‚Ä¶     27 AL    (((-36.39119 -10.50082, -36.39864 -10.4978‚Ä¶
## 3 "Amap\xe‚Ä¶ Norte      16 AP    (((-51.3738 -0.3705301, -51.37337 -0.36712‚Ä¶
## 4 Amazonas  Norte      13 AM    (((-73.80098 -7.111453, -73.80106 -7.11128‚Ä¶
```

--


```r
  # Verifica a classe do objeto
  class(shp_brazil)
```

```
## [1] "sf"         "tbl_df"     "tbl"        "data.frame"
```


---

class: bg-main1

# Leitura de dados espaciais

&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-26-1.png" style="display: block; margin: auto;" /&gt;

---
class: bg-main1

# Escrita de dados espaciais


```r
  # Escrita do arquivo vetorial em geojson
  sf::write_sf(shp_brazil, "data/estados_brasil.geojson")
```
&lt;br&gt;

```r
  # Leitura do arquivo .geojson que cont√©m as unidades federativas  
  shp_json &lt;- sf::read_sf("data/estados_brasil.geojson") 

  head(shp_json, 2)
```

```
## Simple feature collection with 2 features and 4 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.99094 ymin: -11.14449 xmax: -35.15167 ymax: -7.111453
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
## # A tibble: 2 x 5
##   ESTADOS REGIAO  COD_UF UF                                        geometry
##   &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;                           &lt;MULTIPOLYGON [¬∞]&gt;
## 1 Acre    Norte       12 AC    (((-73.80098 -7.111453, -73.74084 -7.143186‚Ä¶
## 2 Alagoas Nordes‚Ä¶     27 AL    (((-36.39119 -10.50082, -36.39864 -10.49789‚Ä¶
```

---


class: bg-main1

# Tipos geom√©tricos
&lt;br&gt;
## `POINT`

```r
  # Impota√ß√£o do pacote
  library(sf)
```

```
## Linking to GEOS 3.5.1, GDAL 2.1.2, PROJ 4.9.3
```

```r
  # Cria√ß√£o de um ponto no plano
  ponto &lt;- sf::st_point(c(3, 4))
  
  ponto
```

```
## POINT (3 4)
```

&lt;br&gt;

## Classe:


```r
  # Verifica a classe do objeto  
  class(ponto)
```

```
## [1] "XY"    "POINT" "sfg"
```
---

class: bg-main1
# Tipos geom√©tricos

## `LINESTRING`

```r
  # Cria√ß√£o dos segmentos de reta
  linha &lt;- rbind(c(2, 1), c(4, 4), c(8, 2), c(4, 2) )

  # Cria√ß√£o do linestring
  linestring &lt;- sf::st_linestring(linha)
  
  linestring
```

```
## LINESTRING (2 1, 4 4, 8 2, 4 2)
```

&lt;br&gt;
--
## `POLYGON`

```r
  # Cria√ß√£o dos segmentos de reta
  poligono &lt;- rbind(c(2, 1), c(1, 2), c(1, 5), c(5, 3), c(2, 1))

  # Cria√ß√£o do poligono
  polygon &lt;- sf::st_polygon(list(poligono))

  polygon
```

```
## POLYGON ((2 1, 1 2, 1 5, 5 3, 2 1))
```

---
class: bg-main1

# Visualiza√ß√£o dos tipos geom√©tricos

&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-33-1.png" style="display: block; margin: auto;" /&gt;

---

class: bg-main1

# Tipos geom√©tricos
&lt;br&gt;


&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-35-1.png" style="display: block; margin: auto;" /&gt;
---
class: bg-main1
# Tipos geom√©tricos
&lt;br&gt;

### Podemos representar uma lista de tipos geom√©tricos com a classe `sfc` (*Simple Feature Columns*), a qual cria atributos de objetos `sfg`, por exemplo:


```r
  # Defini√ß√£o dos pontos
  ponto_1 &lt;- c(2,4)
  linha_1 &lt;- rbind(c(1,2), c(3,4))
  
  # Cria√ß√£o dos objetos sfg
  point &lt;- sf::st_point(ponto_1)
  linestring &lt;- sf::st_linestring(linha_1)
  
  # Cria√ß√£o de um objeto sfc
  sfc_obj &lt;- sf::st_sfc(point, linestring)
  
  sfc_obj
```

```
## Geometry set for 2 features 
## geometry type:  GEOMETRY
## dimension:      XY
## bbox:           xmin: 1 ymin: 2 xmax: 3 ymax: 4
## epsg (SRID):    NA
## proj4string:    NA
```

```
## POINT (2 4)
```

```
## LINESTRING (1 2, 3 4)
```

---
class: bg-main1
# Relacionamentos espaciais

&lt;br&gt; 

--

### `Equals` - Verifica se duas geom√©trias s√£o iguais;
--

### `Disjoint` - Verifica se duas geom√©trias s√£o disjuntas;
--

### `Touches` - Verifica se duas geom√©tricas se tocam;
--

### `Crosses` - Verifica se duas geom√©tricas se cruzam;
--

### `Within`- Verifica se a geom√©tria A est√° contida em B;
--

### `Contains` - Verifica se a geom√©tria B cont√™m a geometria A;
--

### `Overleaps` - Verifica se duas geom√©trias se sobrep√µem;
--

### `Intersects` - Verifica se duas geom√©tricas se interseccionam.

---

class: middle bg-main1

# Hora de praticaR! 

---
class: bg-main1
## `Equals`



&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-38-1.png" style="display: block; margin: auto;" /&gt;
--

```
## [1] FALSE
```

---

class: bg-main1

## `Equals`


&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-41-1.png" style="display: block; margin: auto;" /&gt;

--


```
## [1] TRUE
```

---
class: bg-main1

## `Disjoint`


&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-44-1.png" style="display: block; margin: auto;" /&gt;

--

```
## [1] TRUE
```
---

class: bg-main1
## `Disjoint`


&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-47-1.png" style="display: block; margin: auto;" /&gt;

--


```
## [1] FALSE
```
---
class: bg-main1
## `Touches`


&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-50-1.png" style="display: block; margin: auto;" /&gt;

--

```
## [1] TRUE
```
---
class: bg-main1
## `Touches`


&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-53-1.png" style="display: block; margin: auto;" /&gt;

--

```
## [1] FALSE
```
---
class: bg-main1
## `Crosses`


&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-56-1.png" style="display: block; margin: auto;" /&gt;
--

```
## [1] TRUE
```

---

class: bg-main1
## `Crosses`


&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-59-1.png" style="display: block; margin: auto;" /&gt;
--


```
## [1] TRUE
```
---

class: bg-main1
## `Within`



&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-62-1.png" style="display: block; margin: auto;" /&gt;
--

```
## [1] TRUE
```

---

class: bg-main1
## `Contains`



&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-65-1.png" style="display: block; margin: auto;" /&gt;
--


```
## [1] TRUE
```
---
class: bg-main1
## `Overlaps`



&lt;img src="apresentacao_data_files/figure-html/unnamed-chunk-68-1.png" style="display: block; margin: auto;" /&gt;
--

```
## [1] TRUE
```

---

class: middle bg-main1

# Operadores m√©tricos üìê

---

class: bg-main1
# Operadores m√©tricos

&lt;br&gt;

## `st_area` - √Årea de um tipo geom√©trico poligonal
## `st_length` - Comprimento de tipos geom√©tricos 1D (`LINESTRING`)
---

class: bg-main1
# √Årea

### Vamos calcular a √°rea do estado do Rio de Janeiro


```r
  # Importa√ß√£o do ggplot2 para visualiza√ß√£o de dados
  library(ggplot2)
  
  # Leitura do shp que cont√©m os estados brasileiros
  shp_brazil &lt;- sf::read_sf("data/1_estados_do_brasil_shape/Brasil.shp")  
  
  # Sele√ß√£o do estado do Rio de Janeiro
  estado_rj &lt;- shp_brazil %&gt;% dplyr::filter(ESTADOS=="Rio de Janeiro")
  
  # C√°lculo da √°rea em metros quadrados
  area_rj &lt;- sf::st_area(estado_rj)
  
  # Convers√£o para km^2
  area_rj &lt;- area_rj/1e+6
  
  area_rj
```

```
## 43791.83 [m^2]
```

--

### Segundo o [IBGE](https://www.ibge.gov.br/home/geociencias/areaterritorial/principal.shtm) (Instituto Brasileiro de Geografia e Estat√≠stica), a √°rea do estado do Rio de Janeiro corresponde a `\(43.781,588 Km^2\)` e a √°rea da retornada pela nossa consulta `\(43.791,83 Km^2\)`. 

---

class: bg-main1
# Comprimento
### Vamos calcular o comprimento do Rio Para√≠ba


```r
   # Leitura do shapefile   
  rios_brazil &lt;- sf::read_sf("data/4_rios_brasil/Brasil_rios.shp")
  
   # Filtro do rio paraiba do sul
  rio_paraiba &lt;- rios_brazil %&gt;% dplyr::filter(NORIOCOMP == "Rio Para√≠ba do Sul")

  # Comprimeiro do rio paraiba do sul
  rio_paraiba_comp &lt;- sf::st_length(rio_paraiba)
  
  # Convers√£o para km
  rio_paraiba_comp &lt;- units::set_units(rio_paraiba_comp, km)
  
  rio_paraiba_comp
```

```
## 868.4412 [km]
```

### Segundo a [Wikipedia](https://pt.wikipedia.org/wiki/Listas_de_rios_do_Brasil), o comprimento do Rio Para√≠ba do Sul correponde a `\(1.137 Km\)` e o nosso m√©todo obteve `\(\approx 868 Km\)`. 

---
class: middle bg-main1
# Obrigado!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
